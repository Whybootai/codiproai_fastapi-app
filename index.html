<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Email Tone Generator</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <style>
         body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(to right, #e3f2fd, #bbdefb, #90caf9);
            margin: 0;
            padding: 0;
            color: #333;
             transition: background 0.3s, color 0.3s;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        body.dark-mode {
             background: linear-gradient(to right, #0f0c29, #302b63, #24243e);
            color: #fff;
         }

          .container {
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            flex: 1;
        }

        .tool-header {
            font-size: 2rem;
            margin-bottom: 20px;
            text-transform: uppercase;
            letter-spacing: 2px;
            color: #1976d2;
            transition: color 0.3s;
        }

         .dark-mode .tool-header{
            color: #ff4081;
         }

         .input-box {
            margin-bottom: 20px;
            padding: 10px;
            width: 300px;
            background: #fff;
            border: 2px solid #1976d2;
            border-radius: 8px;
            color: #333;
            font-size: 1rem;
            box-sizing: border-box;
            transition: all 0.3s ease;
        }

         .dark-mode .input-box{
             background: #333;
             border-color: #ff4081;
             color: #fff;
         }


        .input-box:focus {
            border-color: #1976d2;
            outline: none;
        }

        .dark-mode .input-box:focus {
            border-color: #fff;
            outline: none;
         }

        .select {
            padding: 10px;
            background: #fff;
            border: 2px solid #1976d2;
            border-radius: 8px;
            width: 320px;
            margin-bottom: 20px;
            color: #333;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .dark-mode .select {
             background: #333;
             border-color: #ff4081;
             color: #fff;
         }


        .select:focus {
            border-color: #1976d2;
            outline: none;
        }

         .dark-mode .select:focus {
            border-color: #fff;
            outline: none;
         }

        .generate-btn {
            padding: 12px 20px;
            background: #1976d2;
            border: none;
            border-radius: 8px;
            color: #fff;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .dark-mode .generate-btn{
             background: #ff4081;
         }

        .generate-btn:hover {
            background: #0d47a1;
        }
         .dark-mode .generate-btn:hover{
             background: #f50057;
         }

         .output {
            margin-top: 20px;
             width: 80%;
             position: relative;
            padding: 15px;
            background: #fff;
            border-radius: 8px;
            font-size: 1rem;
             color: #333;
            text-align: left;
             max-height: 400px;
             overflow-y: auto;
            transition: background 0.3s, color 0.3s;
             position: relative;
        }

         .dark-mode .output{
              background: #333;
             color: #fff;
         }
        .output pre{
              white-space: pre-wrap;
            font-family: inherit;
             margin: 0;
             padding: 0;
        }

        .copy-icon {
             position: absolute;
             top: 10px;
            right: 10px;
             cursor: pointer;
             font-size: 1.2rem;
            color: #1976d2;
             transition: color 0.3s;
        }

         .dark-mode .copy-icon{
             color:#ff4081;
         }

        .copy-icon:hover {
            color: #0d47a1;
        }
        .dark-mode .copy-icon:hover{
           color: #f50057;
         }

       .notification {
          position: absolute;
          top: 50%;
           right: 20px;
          transform: translateY(-50%);
         padding: 5px 10px;
          background-color: #4caf50;
          color: white;
          border-radius: 5px;
         z-index: 1000;
          display: none;
          transition: opacity 0.3s ease-in-out;
         font-size: 0.9rem;
         align-items: center;
        display: inline-flex;
         white-space: nowrap;
        }
        .notification i{
           margin-right: 5px;
       }


        .modal {
            display: none;
            position: fixed;
            z-index: 1;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.4);
        }

        .modal-content {
            background-color: #fff;
            margin: 15% auto;
            padding: 20px;
            border: 1px solid #888;
            width: 80%;
            max-width: 500px;
            border-radius: 10px;
             color: #333;
             transition: background 0.3s, color 0.3s;
        }

          .dark-mode .modal-content{
            background-color: #333;
            color: #fff;
        }

        .modal-content input[type="text"] {
             margin-bottom: 20px;
            padding: 10px;
            width: calc(100% - 20px);
            background: #f0f0f0;
            border: 1px solid #1976d2;
            border-radius: 8px;
             color: #333;
            font-size: 1rem;
            box-sizing: border-box;
             transition: all 0.3s ease;
            display:block;
        }
         .dark-mode .modal-content input[type="text"]{
             background: #555;
             border-color: #ff4081;
              color: #fff;
         }


        .modal-content input[type="text"]:focus{
            border-color: #1976d2;
            outline: none;
        }

          .dark-mode .modal-content input[type="text"]:focus{
             border-color: #fff;
              outline: none;
        }


        .modal-content .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
        }

        .modal-content .close:hover,
        .modal-content .close:focus {
            color: #333;
            text-decoration: none;
            cursor: pointer;
        }

          .dark-mode .modal-content .close:hover,
        .dark-mode .modal-content .close:focus {
            color: #fff;
            text-decoration: none;
            cursor: pointer;
        }

         .modal-content button {
            padding: 12px 20px;
            background: #1976d2;
            border: none;
            border-radius: 8px;
            color: #fff;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s ease;
             display: block;
             margin: 0 auto;
        }
           .dark-mode .modal-content button {
              background: #ff4081;
        }

        .modal-content button:hover {
            background: #0d47a1;
        }
          .dark-mode .modal-content button:hover {
             background: #f50057;
        }
        .error-message{
            color: #ff4081;
            margin-top: 10px;
        }
        .footer {
             text-align: center;
            padding: 10px 0;
            font-size: 0.8rem;
            color: #777;
           margin-top: 20px;
           transition: color 0.3s;
            border-top: 1px solid #ddd;

        }

         .dark-mode .footer{
              color: #ddd;
             border-top: 1px solid #555;
         }

        .top-icons{
           display: flex;
           justify-content: space-between;
           width: 100%;
           padding: 10px 0;
        }
        .top-icons i{
            font-size: 1.5rem;
            cursor: pointer;
        }

        .top-icons i:hover{
            opacity: 0.8;
        }

         .dark-mode .top-icons i{
             color: #fff;
         }

         #userGuideModal .modal-content{
             max-width: 700px;
         }

         #userGuideModal .modal-content h2{
             margin-bottom: 20px;
         }

         #userGuideModal .modal-content p{
             line-height: 1.6;
         }
    </style>
</head>
<body>
    <div class="modal" id="adminCodeModal">
        <div class="modal-content">
            <span class="close" id="closeAdminModal">×</span>
            <h2>Enter Admin Code</h2>
             <input type="text" id="adminCodeInput" placeholder="Enter Admin Code" />
             <div id="adminCodeError" class="error-message" style="display:none;">Invalid Admin Code</div>
            <button onclick="validateAdminCode()">Submit Admin Code</button>
        </div>
    </div>
     <div class="modal" id="userGuideModal">
        <div class="modal-content">
            <span class="close" id="closeUserGuideModal">×</span>
            <h2>User Guide</h2>
             <p>
                 Welcome to the Email Tone Generator! This tool helps you create emails for various scenarios related to event management.
             </p>
             <p>
                 <strong>How to Use:</strong>
             </p>
             <ol>
                 <li>
                      <strong>Enter Event Name:</strong> Input the name of your event in the "Enter Event Name" field. This is a required field.
                 </li>
                 <li>
                      <strong>Select Email Type:</strong> Choose the type of email you want to generate from the dropdown menu. The available email types are:
                     <ul>
                         <li><strong>Initial Invite:</strong> For sending out the first invitation to the event.</li>
                         <li><strong>Missed Call Follow-Up:</strong> To send after trying to call someone.</li>
                         <li><strong>Follow-Up Call:</strong> For sending an email after a call has taken place.</li>
                         <li><strong>Voicemail Follow-Up:</strong> For emails after leaving a voicemail.</li>
                         <li><strong>Final Follow-Up / Last Chance:</strong> When it is the last opportunity to join the event.</li>
                      </ul>
                </li>
                <li>
                      <strong>Select Audience Type:</strong> Choose whether the email is intended for "Participants" or "Organizers"
                 </li>
                 <li>
                       <strong>Generate Email:</strong> Click the "Generate Email" button to create the email content. The generated email will be displayed below the button.
                 </li>
                 <li>
                      <strong>Copy Email:</strong> Click the copy icon to copy the generated email to your clipboard. A small notification will appear to confirm the copy process
                 </li>
             </ol>
            <p>
                 Use the sun/moon icons on the top left to toggle between light and dark mode.
             </p>
        </div>
    </div>
    <div class="container" id="toolContainer" style="display: none;">
         <div class="top-icons">
             <i class="fas fa-sun" id="themeToggle"></i>
            <i class="fas fa-question-circle" id="userGuide"></i>
         </div>
        <div class="tool-header">Email Tone Generator</div>

        <input type="text" id="eventName" class="input-box" placeholder="Enter Event Name" />

        <select id="emailType" class="select">
            <option value="initial-invite">Initial Invite</option>
            <option value="missed-call-follow-up">Missed Call Follow-Up</option>
            <option value="follow-up-call">Follow-Up Call</option>
            <option value="voicemail-follow-up">Voicemail Follow-Up</option>
            <option value="final-follow-up">Final Follow-Up / Last Chance</option>
        </select>

        <select id="audienceType" class="select">
            <option value="participants">Participants</option>
            <option value="organizers">Organizers</option>
        </select>

        <button class="generate-btn" onclick="generateEmail()">Generate Email</button>

        <div id="generatedEmail" class="output"></div>
    </div>
     <footer class="footer">
        <p>Developed by Flynn James P.</p>
      </footer>
    <script>
        const adminCodeModal = document.getElementById('adminCodeModal');
        const toolContainer = document.getElementById('toolContainer');
        const closeAdminModalBtn = document.getElementById('closeAdminModal');
        const adminCodeInput = document.getElementById('adminCodeInput');
        const adminCodeError = document.getElementById('adminCodeError');
        const userGuideModal = document.getElementById('userGuideModal');
        const closeUserGuideModalBtn = document.getElementById('closeUserGuideModal');
       const themeToggle = document.getElementById('themeToggle');
        const userGuide = document.getElementById('userGuide');
         const body = document.body;

        const ADMIN_CODE = "123456";
        const API_KEY = "AIzaSyBQKOdFOb4R4u3EI963qccLFneLNe5xN-g";
        let apiKey = null;

          let isDarkMode = localStorage.getItem('darkMode') === 'true';

        if(isDarkMode){
          body.classList.add('dark-mode');
            themeToggle.classList.remove('fa-sun');
             themeToggle.classList.add('fa-moon');
        }


          themeToggle.addEventListener('click', () => {
            body.classList.toggle('dark-mode');
               isDarkMode = !isDarkMode;
                localStorage.setItem('darkMode', isDarkMode);

               if(isDarkMode){
                     themeToggle.classList.remove('fa-sun');
                     themeToggle.classList.add('fa-moon');
                 }else{
                     themeToggle.classList.remove('fa-moon');
                     themeToggle.classList.add('fa-sun');
                }

        });


        userGuide.addEventListener('click', () => {
            userGuideModal.style.display = 'block';
        });

         closeUserGuideModalBtn.onclick = () =>{
            userGuideModal.style.display = 'none';
        }

        closeAdminModalBtn.onclick = () =>{
            adminCodeModal.style.display = 'none';
        }

         window.onclick = (event) =>{
            if(event.target === adminCodeModal){
                 adminCodeModal.style.display = 'none';
            }

            if(event.target === userGuideModal){
                userGuideModal.style.display = 'none';
            }
        }

         adminCodeModal.style.display = 'block';



         function validateAdminCode(){
                adminCodeError.style.display = 'none';
                 const code = adminCodeInput.value;
                  if (code !== ADMIN_CODE) {
                    adminCodeError.style.display = 'block';
                    adminCodeError.textContent = "Invalid Admin Code";
                    return;
                  }
                  apiKey = API_KEY;
                  adminCodeModal.style.display = 'none';
                  toolContainer.style.display = 'flex';

            }

          async function generateEmail() {
             const eventName = document.getElementById("eventName").value;
            const emailType = document.getElementById("emailType").value;
            const audienceType = document.getElementById("audienceType").value;
            const outputDiv = document.getElementById("generatedEmail");

            if (eventName === "") {
                outputDiv.innerHTML = "<span style='color: #ff4081;'>Please enter an event name.</span>";
                return;
            }

             outputDiv.innerHTML = "<p>Loading...</p>";

            let prompt = '';

            switch(emailType) {
              case 'initial-invite':
                prompt = `Create an initial invitation email to ${audienceType} for the event ${eventName}. Include a brief description, date, time, venue. Make it compelling.`;
              break;
              case 'missed-call-follow-up':
                 prompt = `Create a missed call follow-up email to ${audienceType} for the event ${eventName}. Mention that you tried to call them, state interest on the event, and invite them to reach back`;
              break;
              case 'follow-up-call':
                prompt = `Create a follow-up email after an earlier call with ${audienceType} for the event ${eventName}. Reference something specific discussed on the call, re-emphasize the event benefits, and invite them to confirm their participation.`;
              break;
              case 'voicemail-follow-up':
                  prompt = `Create a follow-up email after leaving a voicemail to ${audienceType} for the event ${eventName}. Mention that you left a message, briefly reiterate the event details, and provide a clear call-to-action.`;
               break;
              case 'final-follow-up':
                prompt = `Create a final follow-up/last chance email to ${audienceType} for the event ${eventName}. Convey urgency, mention that it's the last opportunity to join the event, provide a clear and simple option to register, and mention that this is the last reminder.`;
               break;
               default:
               outputDiv.innerHTML = "<span style='color: #ff4081;'>Invalid email type selected.</span>";
               return;
           }

            try {
                const model = "gemini-pro";
                const url = `https://generativelanguage.googleapis.com/v1beta/models/${model}:generateContent?key=${apiKey}`;

                const response = await fetch(url, {
                    method: 'POST',
                    headers: {
                         'Content-Type': 'application/json'
                     },
                     body:JSON.stringify({
                        "contents": [{
                           "parts": [{
                             "text": prompt
                            }]
                        }]
                    })
                });

                if(!response.ok){
                  throw new Error(`HTTP error! status: ${response.status}`);
                }

                const data = await response.json();
                const generatedText = data.candidates?.[0]?.content?.parts?.[0]?.text;
                  outputDiv.innerHTML =  `<strong>Email Body:</strong><br><pre>${generatedText}</pre><i class="fas fa-copy copy-icon" onclick="copyEmail(this)"></i>`;

            } catch (error) {
                console.error("API call failed:", error);
                outputDiv.innerHTML = `<span style="color: #ff4081;">Failed to generate email. Please check your API key and try again. Error: ${error.message}</span>`;
            }
        }


         function copyEmail(icon) {
        const outputDiv = icon.parentElement;
        const preElement = outputDiv.querySelector('pre'); // Get the <pre> element
        if (!preElement) {
            console.error("No <pre> element found!");
            return;
        }
        const emailBody = preElement.textContent || preElement.innerText;

           const notificationDiv = document.createElement('div');
              notificationDiv.classList.add('notification');
             notificationDiv.innerHTML = '<i class="fas fa-check"></i> Copied';
               outputDiv.appendChild(notificationDiv);

         navigator.clipboard.writeText(emailBody).then(() => {
                setTimeout(() => {
                     notificationDiv.style.opacity = '0';
                     setTimeout(() => {
                         notificationDiv.remove();
                       },300);
                }, 1000);
            }).catch((err) => {
                console.error('Failed to copy: ', err);
             });

        }
    </script>
</body>
</html>
